<?xml version="1.0" encoding="UTF-8"?>
<odoo>

     <template id="report_sale_delivery_zone">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="partner_delivery_zone.report_sale_delivery_zone_document"/>
            </t>
        </t>
    </template>

    <template id="report_sale_delivery_zone_document">
        <t t-call="web.external_layout">
            <div class="page">
                <div class="oe_structure"/>

                <!-- Titulo -->

                <div style="margin-top:50px;">
                    <div style="float:left;width:60%;">
                        <span>Zona:</span>
                        <i><span t-field="doc.name"></span></i>
                    </div>

                    <div style="float:left;width:40%;">
                       <span>Fecha: </span>
                       <i><span t-esc="date_report"></span></i>
                    </div>

                </div>

                <!-- Quotations -->

                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Presupuesto</th>
                            <th>Cliente</th>
                            <th class="text-right">Importe</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="quotations" t-value="get_quotations_delivery_zone_date(doc.id, date_report)"/>
                        <t t-set="quotation_subtotal" t-value="0"/>
                        <t t-foreach="quotations" t-as="quotation">
                            <tr>
                                <td>
                                    <span t-esc="quotation.name"/>
                                </td>
                                <td>
                                    <span t-esc="quotation.partner_id.name"/>
                                </td>
                                <td align="right">
                                    <span t-esc="quotation.amount_total"/>
                                </td>
                            </tr>
                            <t t-set="quotation_subtotal" t-value="quotation_subtotal + quotation.amount_total"/>
                        </t>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td>
                                <strong>Total presupuestos</strong>
                            </td>
                            <td/>
                            <td align="right">
                                <strong>
                                    <span t-esc="quotation_subtotal"/>
                                </strong>
                            </td>
                        </tr>
                    </tfoot>
                </table>

                <!--
                <tfoot>
                    <tr>
                        <td>
                            <strong>Total presupuesto</strong>
                        </td>
                        <td/>
                        <td align="right">
                            <strong>
                                <span t-esc="quotation_subtotal"/>
                            </strong>
                        </td>
                    </tr>
                </tfoot>
                -->

                <!-- Sale Order

                    <t t-set="sale_orders" t-value="get_sale_orders_delivery_zone_date(doc.id, date_report)"/>

                    <t t-foreach="sale_orders" t-as="sale_order">
                        <span t-field="sale_order.id"/>
                    </t>

                -->

            </div>
        </t>
    </template>

    <template id="report_sale_delivery_zone_backup">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <div class="oe_structure"/>
                    <div class="row">
                        <table class="table table-condensed">
                            <thead>
                                <tr>
                                    <th style="text-align:left;"><strong>Name </strong></th>
                                    <th style="text-align:left;"><strong>Date </strong></th>
                                    <th style="text-align:left;"><strong>Status </strong></th>
                                    <th style="text-align:left;"><strong>Notes </strong></th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="appointments" t-as="o">
                                    <tr>
                                        <td style="text-align:left;">
                                            <t t-esc="o['name']"/>
                                        </td>
                                        <td style="text-align:left;">
                                            <t t-esc="o['appointment_date']"/>
                                        </td>
                                         <td style="text-align:left;">
                                             <span t-field="o.state"/>
                                        </td>
                                        <td style="text-align:left;">
                                            <t t-esc="o['notes']"/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
            </t>
        </t>
    </template>

    <report id="report_sale"
            string="Appointment"
            model="hospital.patient"
            report_type="qweb-pdf"
            name="partner_delivery_zone.report_sale_delivery_zone"
            file="partner_delivery_zone.report_sale_delivery_zone"/>

</odoo>
